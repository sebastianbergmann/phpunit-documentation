<?xml version="1.0" encoding="utf-8" ?>

<chapter id="textui">
  <title>コマンドラインのテストランナー</title>

  <para>
    <filename>phpunit</filename> コマンドを実行すると、PHPUnit
    のコマンドライン版テストランナーが起動します。
    コマンドラインのテストランナーを使用したテストの様子を以下に示します。
  </para>

  <screen><userinput>phpunit ArrayTest</userinput>
PHPUnit 6.2.0 by Sebastian Bergmann and contributors.

..

Time: 0 seconds


OK (2 tests, 2 assertions)</screen>

  <para>
    このように実行すると、PHPUnit のコマンドラインテストランナーは、
    まず現在の作業ディレクトリにあるソースファイル
    <filename>ArrayTest.php</filename> を探してそれを読み込み、テストケースクラス
    <literal>ArrayTest</literal> を探します。
    そして、そのクラス内のテストを実行します。
  </para>

  <para>
    テストがひとつ実行されるたびに、PHPUnit
    コマンドラインツールはその経過を示す文字を出力します。
  </para>

  <variablelist>
    <varlistentry>
      <term><literal>.</literal></term>
      <listitem>
        <para>
          テストが成功した際に表示されます。
        </para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><literal>F</literal></term>
      <listitem>
        <para>
          テストメソッドの実行中、アサーションに失敗した際に表示されます。
        </para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><literal>E</literal></term>
      <listitem>
        <para>
          テストメソッドの実行中、エラーが発生した際に表示されます。
        </para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><literal>R</literal></term>
      <listitem>
        <para>
          テストが危険だとマークされている場合に表示されます
          (<xref linkend="risky-tests" /> を参照ください)。
        </para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><literal>S</literal></term>
      <listitem>
        <para>
          テストが飛ばされた場合に表示されます
          (<xref linkend="incomplete-and-skipped-tests" /> を参照ください)。
        </para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term><literal>I</literal></term>
      <listitem>
        <para>
          テストが「不完全」あるいは「未実装」とマークされている場合に表示されます
          (<xref linkend="incomplete-and-skipped-tests" /> を参照ください)。
        </para>
      </listitem>
    </varlistentry>
  </variablelist>

  <para>
    <indexterm><primary>Error (エラー)</primary></indexterm>
    <indexterm><primary>Failure (失敗)</primary></indexterm>

    PHPUnit は、<emphasis>失敗 (failures)</emphasis> と
    <emphasis>エラー (errors)</emphasis> を区別します。
    「失敗」は PHPUnit のアサーションに違反した場合、つまり例えば
    <literal>assertEquals()</literal> のコールに失敗した場合などで、
    「エラー」は予期せぬ例外や PHP のエラーが発生した場合となります。
    この区別は、時に有用です。というのは「エラー」は一般的に「失敗」
    より修正しやすい傾向があるからです。
    もし大量の問題が発生した場合は、まず「エラー」を最初に片付け、
    その後で「失敗」を修正していくのが最良の方法です。
  </para>

  <section id="textui.clioptions">
    <title>コマンドラインオプション</title>

    <para>
      以下のコードで、コマンドライン版テストランナーのオプションの一覧を見てみましょう。
    </para>

    <screen><userinput>phpunit --help</userinput>
<![CDATA[PHPUnit 6.2.0 by Sebastian Bergmann and contributors.

Usage: phpunit [options] UnitTest [UnitTest.php]
       phpunit [options] <directory>

Code Coverage Options:

  --coverage-clover <file>  Generate code coverage report in Clover XML format.
  --coverage-crap4j <file>  Generate code coverage report in Crap4J XML format.
  --coverage-html <dir>     Generate code coverage report in HTML format.
  --coverage-php <file>     Export PHP_CodeCoverage object to file.
  --coverage-text=<file>    Generate code coverage report in text format.
                            Default: Standard output.
  --coverage-xml <dir>      Generate code coverage report in PHPUnit XML format.

Logging Options:

  --log-junit <file>        Log test execution in JUnit XML format to file.
  --log-tap <file>          Log test execution in TAP format to file.
  --log-json <file>         Log test execution in JSON format.
  --testdox-html <file>     Write agile documentation in HTML format to file.
  --testdox-text <file>     Write agile documentation in Text format to file.

Test Selection Options:

  --filter <pattern>        Filter which tests to run.
  --testsuite <name,...>      Filter which testsuite to run.
  --group ...               Only runs tests from the specified group(s).
  --exclude-group ...       Exclude tests from the specified group(s).
  --list-groups             List available test groups.
  --test-suffix ...         Only search for test in files with specified
                            suffix(es). Default: Test.php,.phpt

Test Execution Options:

  --report-useless-tests    Be strict about tests that do not test anything.
  --strict-coverage         Be strict about unintentionally covered code.
  --strict-global-state     Be strict about changes to global state
  --disallow-test-output    Be strict about output during tests.
  --enforce-time-limit      Enforce time limit based on test size.
  --disallow-todo-tests     Disallow @todo-annotated tests.

  --process-isolation       Run each test in a separate PHP process.
  --no-globals-backup       Do not backup and restore $GLOBALS for each test.
  --static-backup           Backup and restore static attributes for each test.

  --colors=<flag>           Use colors in output ("never", "auto" or "always").
  --columns <n>             Number of columns to use for progress output.
  --columns max             Use maximum number of columns for progress output.
  --stderr                  Write to STDERR instead of STDOUT.
  --stop-on-error           Stop execution upon first error.
  --stop-on-failure         Stop execution upon first error or failure.
  --stop-on-risky           Stop execution upon first risky test.
  --stop-on-skipped         Stop execution upon first skipped test.
  --stop-on-incomplete      Stop execution upon first incomplete test.
  -v|--verbose              Output more verbose information.
  --debug                   Display debugging information during test execution.

  --loader <loader>         TestSuiteLoader implementation to use.
  --repeat <times>          Runs the test(s) repeatedly.
  --tap                     Report test execution progress in TAP format.
  --testdox                 Report test execution progress in TestDox format.
  --printer <printer>       TestListener implementation to use.

Configuration Options:

  --bootstrap <file>        A "bootstrap" PHP file that is run before the tests.
  -c|--configuration <file> Read configuration from XML file.
  --no-configuration        Ignore default configuration file (phpunit.xml).
  --include-path <path(s)>  Prepend PHP's include_path with given path(s).
  -d key[=value]            Sets a php.ini value.

Miscellaneous Options:

  -h|--help                 Prints this usage information.
  --version                 Prints the version and exits.]]></screen>

    <variablelist>
      <varlistentry>
        <term><literal>phpunit UnitTest</literal></term>
        <listitem>
          <para>
            <literal>UnitTest</literal> という名前のクラスで定義されている
            テストを実行します。このクラスは、<filename>UnitTest.php</filename>
            という名前のファイルの中に定義されているものとします。
          </para>

          <para>
            <literal>UnitTest</literal> は、<literal>PHPUnit\Framework\TestCase</literal>
            を継承したクラスであるか、あるいは <literal>PHPUnit_Framework_Test</literal>
            オブジェクト、例えば <literal>PHPUnit_Framework_TestSuite</literal>
            のインスタンスを返す <literal>public static suite()</literal>
            というメソッドを保持するクラスでなければなりません。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>phpunit UnitTest UnitTest.php</literal></term>
        <listitem>
          <para>
            <literal>UnitTest</literal> という名前のクラスで定義されているテストを実行します。
            このクラスは、指定したファイルの中で定義されているものとします。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>Code Coverage</primary></indexterm>
        <term><literal>--coverage-clover</literal></term>
        <listitem>
          <para>
            テスト結果から XML 形式のログファイルを作成し、
            コードカバレッジ情報もそこに含めます。
            詳細は <xref linkend="logging" /> を参照ください。
          </para>
          <para>
            この機能は、tokenizer 拡張モジュールおよび Xdebug
            拡張モジュールがインストールされている場合にのみ使用可能となることに注意しましょう。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>Code Coverage</primary></indexterm>
        <term><literal>--coverage-crap4j</literal></term>
        <listitem>
          <para>
            コードカバレッジレポートを Crap4j 形式で作成します。詳細は
            <xref linkend="code-coverage-analysis" /> を参照ください。
          </para>
          <para>
            この機能は、tokenizer 拡張モジュールおよび Xdebug
            拡張モジュールがインストールされている場合にのみ使用可能となることに注意しましょう。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>Code Coverage</primary></indexterm>
        <indexterm><primary>Report</primary></indexterm>
        <term><literal>--coverage-html</literal></term>
        <listitem>
          <para>
            コードカバレッジレポートを HTML 形式で作成します。詳細は
            <xref linkend="code-coverage-analysis" /> を参照ください。
          </para>
          <para>
            この機能は、tokenizer 拡張モジュールおよび Xdebug
            拡張モジュールがインストールされている場合にのみ使用可能となることに注意しましょう。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>Code Coverage</primary></indexterm>
        <term><literal>--coverage-php</literal></term>
        <listitem>
          <para>
            シリアライズした PHP_CodeCoverage オブジェクトを生成し、
            コードカバレッジ情報もそこに含めます。
          </para>
          <para>
            この機能は、tokenizer 拡張モジュールおよび Xdebug
            拡張モジュールがインストールされている場合にのみ使用可能となることに注意しましょう。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>Code Coverage</primary></indexterm>
        <term><literal>--coverage-text</literal></term>
        <listitem>
          <para>
            テストを実行したときに、ログファイルあるいはコマンドライン出力で
            可読形式のコードカバレッジ情報を生成します。
            詳細は <xref linkend="logging" /> を参照ください。
          </para>
          <para>
            この機能は、tokenizer 拡張モジュールおよび Xdebug
            拡張モジュールがインストールされている場合にのみ使用可能となることに注意しましょう。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>Logfile</primary></indexterm>
        <term><literal>--log-junit</literal></term>
        <listitem>
          <para>
            JUnit XML フォーマットを使用して、テストの実行結果のログを作成します。
            詳細は <xref linkend="logging" /> を参照ください。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>Agile Documentation</primary></indexterm>
        <term><literal>--testdox-html</literal> および <literal>--testdox-text</literal></term>
        <listitem>
          <para>
            実行したテストについて、HTML あるいはプレーンテキスト形式のドキュメントを生成します
            詳細は <xref linkend="other-uses-for-tests" /> を参照ください。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--filter</literal></term>
        <listitem>
          <para>
            指定した正規表現パターンにマッチする名前のテストのみを実行します。
            パターンがデリミタで囲まれていない場合は、PHPUnit はパターンをデリミタ <literal>/</literal> で囲みます。
          </para>

          <para>
            マッチするテスト名は、次のいずれかのフォーマットになります。
          </para>

          <variablelist>
            <varlistentry>
              <term><literal>TestNamespace\TestCaseClass::testMethod</literal></term>
              <listitem>
                <para>
                  デフォルトのテスト名のフォーマットは、テストメソッドの中でマジック定数
                  <literal>__METHOD__</literal> を使うのと同等です。
                </para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term><literal>TestNamespace\TestCaseClass::testMethod with data set #0</literal></term>
              <listitem>
                <para>
                  テストがデータプロバイダーを持つ場合、データを処理するたびに、
                  現在のインデックスをデフォルトのテスト名の後に続けたものを取得します。
                </para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term><literal>TestNamespace\TestCaseClass::testMethod with data set "my named data"</literal></term>
              <listitem>
                <para>
                  テストが持つデータプロバイダーが名前つきセットを使う場合、データを処理するたびに、
                  現在の名前をデフォルトのテスト名の後に続けたものを取得します。
                  名前つきデータセットの例は
                  <xref linkend="textui.examples.TestCaseClass.php" />
                  を参照ください。
                </para>

                <example id="textui.examples.TestCaseClass.php">
                  <title>名前つきデータセット</title>
                  <programlisting><![CDATA[<?php
use PHPUnit\Framework\TestCase;

namespace TestNamespace;

class TestCaseClass extends TestCase
{
    /**
     * @dataProvider provider
     */
    public function testMethod($data)
    {
        $this->assertTrue($data);
    }

    public function provider()
    {
        return [
            'my named data' => [true],
            'my data'       => [true]
        ];
    }
}
?>]]></programlisting>
                </example>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term><literal>/path/to/my/test.phpt</literal></term>
              <listitem>
                <para>
                  PHPT のテストのテスト名は、ファイルシステムのパスになります。
                </para>
              </listitem>
            </varlistentry>
          </variablelist>

          <para>
            有効なフィルターパターンの例は、<xref linkend="textui.examples.filter-patterns" /> を参照ください。
          </para>

          <example id="textui.examples.filter-patterns">
            <title>フィルターパターンの例</title>

            <itemizedlist>
              <listitem><para><literal>--filter 'TestNamespace\\TestCaseClass::testMethod'</literal></para></listitem>
              <listitem><para><literal>--filter 'TestNamespace\\TestCaseClass'</literal></para></listitem>
              <listitem><para><literal>--filter TestNamespace</literal></para></listitem>
              <listitem><para><literal>--filter TestCaseClass</literal></para></listitem>
              <listitem><para><literal>--filter testMethod</literal></para></listitem>
              <listitem><para><literal>--filter '/::testMethod .*"my named data"/'</literal></para></listitem>
              <listitem><para><literal>--filter '/::testMethod .*#5$/'</literal></para></listitem>
              <listitem><para><literal>--filter '/::testMethod .*#(5|6|7)$/'</literal></para></listitem>
            </itemizedlist>
          </example>

          <para>
            データプロバイダーのマッチングに使えるショートカットは、
            <xref linkend="textui.examples.filter-shortcuts" /> を参照ください。
          </para>

          <example id="textui.examples.filter-shortcuts">
            <title>フィルターのショートカット</title>

            <itemizedlist>
              <listitem><para><literal>--filter 'testMethod#2'</literal></para></listitem>
              <listitem><para><literal>--filter 'testMethod#2-4'</literal></para></listitem>
              <listitem><para><literal>--filter '#2'</literal></para></listitem>
              <listitem><para><literal>--filter '#2-4'</literal></para></listitem>
              <listitem><para><literal>--filter 'testMethod@my named data'</literal></para></listitem>
              <listitem><para><literal>--filter 'testMethod@my.*data'</literal></para></listitem>
              <listitem><para><literal>--filter '@my named data'</literal></para></listitem>
              <listitem><para><literal>--filter '@my.*data'</literal></para></listitem>
            </itemizedlist>
          </example>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--testsuite</literal></term>
        <listitem>
          <para>
            指定したパターンにマッチする名前のテストスイートのみを実行します。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>Test Groups</primary></indexterm>
        <indexterm><primary>Annotation</primary></indexterm>
        <indexterm><primary>@author</primary></indexterm>
        <indexterm><primary>@group</primary></indexterm>
        <term><literal>--group</literal></term>
        <listitem>
          <para>
            指定したグループのテストのみを実行します。
            あるテストを特定のグループに所属させるには、
            <literal>@group</literal> アノテーションを使用します。
          </para>
          <para>
            <literal>@author</literal> アノテーションは
            <literal>@group</literal> のエイリアスで、
            テストの作者に基づいてテストをフィルタリングします。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>Test Groups</primary></indexterm>
        <indexterm><primary>Annotation</primary></indexterm>
        <indexterm><primary>@group</primary></indexterm>
        <term><literal>--exclude-group</literal></term>
        <listitem>
          <para>
            指定したグループをテストの対象外とします。
            あるテストを特定のグループに所属させるには、
            <literal>@group</literal> アノテーションを使用します。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>Test Groups</primary></indexterm>
        <indexterm><primary>Annotation</primary></indexterm>
        <indexterm><primary>@group</primary></indexterm>
        <term><literal>--list-groups</literal></term>
        <listitem>
          <para>
            使用可能なテストグループの一覧を表示します。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--test-suffix</literal></term>
        <listitem>
          <para>
            指定したサフィックスのテストファイルだけを探します。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--report-useless-tests</literal></term>
        <listitem>
          <para>
            何もテストをしないテストについて厳格にチェックします。
            詳細は <xref linkend="risky-tests" /> を参照ください。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--strict-coverage</literal></term>
        <listitem>
          <para>
            意図せずカバーしているコードについて厳格にチェックします。
            詳細は <xref linkend="risky-tests" /> を参照ください。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--strict-global-state</literal></term>
        <listitem>
          <para>
            グローバルな状態の変更について厳格にチェックします。
            詳細は <xref linkend="risky-tests" /> を参照ください。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--disallow-test-output</literal></term>
        <listitem>
          <para>
            実行中に何かを出力するテストについて厳格にチェックします。
            詳細は <xref linkend="risky-tests" /> を参照ください。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--disallow-todo-tests</literal></term>
        <listitem>
          <para>
            docblock に <literal>@todo</literal> アノテーションが指定されているテストを実行しません。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--enforce-time-limit</literal></term>
        <listitem>
          <para>
            テストのサイズに応じて、制限時間を設定します。
            詳細は <xref linkend="risky-tests" /> を参照ください。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>Process Isolation</primary></indexterm>
        <indexterm><primary>Test Isolation</primary></indexterm>
        <term><literal>--process-isolation</literal></term>
        <listitem>
          <para>
            各テストを個別の PHP プロセスで実行します。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>Test Isolation</primary></indexterm>
        <term><literal>--no-globals-backup</literal></term>
        <listitem>
          <para>
            $GLOBALS のバックアップ・リストアを行いません。
            詳細は <xref linkend="fixtures.global-state" /> を参照ください。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>Test Isolation</primary></indexterm>
        <term><literal>--static-backup</literal></term>
        <listitem>
          <para>
            ユーザ定義クラスの静的属性のバックアップ・リストアを行います。
            詳細は <xref linkend="fixtures.global-state" /> を参照ください。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--colors</literal></term>
        <listitem>
          <para>
            出力に色を使用します。
            Windows では、<ulink url="https://github.com/adoxa/ansicon">ANSICON</ulink> あるいは <ulink url="https://github.com/Maximus5/ConEmu">ConEmu</ulink>
            を利用します。
          </para>
          <para>
            指定できる値は、以下の三つです。
            <itemizedlist>
              <listitem>
                <para>
                  <literal>never</literal>: 出力を色分けしません。これは、<literal>--colors</literal> オプションを省略したときのデフォルトです。
                </para>
              </listitem>
              <listitem>
                <para>
                  <literal>auto</literal>: ターミナルが色をサポートしていない場合や、
                  出力をコマンドにパイプしたりファイルにリダイレクトしたりする場合を除き、出力に色を使います。
                </para>
              </listitem>
              <listitem>
                <para>
                  <literal>always</literal>: ターミナルが色をサポートしていない場合や、
                  出力をコマンドにパイプしたりファイルにリダイレクトしたりする場合も含めて、常に出力に色を使います。
                </para>
              </listitem>
            </itemizedlist>
            <literal>--colors</literal> だけを指定して何も値を指定しなかった場合は、<literal>auto</literal> を選んだものとみなされます。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--stderr</literal></term>
        <listitem>
          <para>
            オプションで、出力先を
            <literal>STDOUT</literal> ではなく <literal>STDERR</literal> にします。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--stop-on-error</literal></term>
        <listitem>
          <para>
            最初にエラーが発生した時点で実行を停止します。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--stop-on-failure</literal></term>
        <listitem>
          <para>
            最初にエラーあるいは失敗が発生した時点で実行を停止します。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--stop-on-risky</literal></term>
        <listitem>
          <para>
            最初に危険なテストがあらわれた時点で実行を停止します。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--stop-on-skipped</literal></term>
        <listitem>
          <para>
            最初にテストのスキップが発生した時点で実行を停止します。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--stop-on-incomplete</literal></term>
        <listitem>
          <para>
            最初に不完全なテストがあらわれた時点で実行を停止します。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--verbose</literal></term>
        <listitem>
          <para>
            より詳細な情報を出力します。例えば、
            未完成のテストや省略したテストの名前が表示されます。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--debug</literal></term>
        <listitem>
          <para>
            テスト名などのデバッグ情報を、テストの実行開始時に出力します。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>PHPUnit_Runner_TestSuiteLoader</primary></indexterm>
        <term><literal>--loader</literal></term>
        <listitem>
          <para>
            <literal>PHPUnit_Runner_TestSuiteLoader</literal> を実装したクラスのうち、
            実際に使用するものを指定します。
          </para>

          <para>
            標準のテストスイートローダーは、現在の作業ディレクトリおよび PHP
            の設定項目 <literal>include_path</literal>
            で指定されているディレクトリからソースファイルを探します。
            <literal>Project_Package_Class</literal>
            クラスがソースファイル <filename>Project/Package/Class.php</filename>
            に対応します。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--repeat</literal></term>
        <listitem>
          <para>
            指定された回数だけ、繰り返しテストを実行します。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>Agile Documentation</primary></indexterm>
        <term><literal>--testdox</literal></term>
        <listitem>
          <para>
            テストの進行状況を、アジャイルな文書として報告します。
            詳細は <xref linkend="other-uses-for-tests" /> を参照ください。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>PHPUnit\Framework\TestListener</primary></indexterm>
        <indexterm><primary>PHPUnit_Util_Printer</primary></indexterm>
        <term><literal>--printer</literal></term>
        <listitem>
          <para>
            結果を表示するために使うプリンタクラスを指定します。このプリンタクラスは
            <literal>PHPUnit_Util_Printer</literal> を継承し、かつ
            <literal>PHPUnit\Framework\TestListener</literal>
            インターフェイスを実装したものでなければなりません。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>--bootstrap</literal></term>
        <listitem>
          <para>
            テストの前に実行される "ブートストラップ" PHP ファイルを指定します。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>Configuration</primary></indexterm>
        <term><literal>--configuration</literal></term>
        <term><literal>-c</literal></term>
        <listitem>
          <para>
            設定を XML ファイルから読み込みます。
            詳細は <xref linkend="appendixes.configuration" /> を参照ください。
          </para>
          <para>
            <filename>phpunit.xml</filename> あるいは
            <filename>phpunit.xml.dist</filename> (この順番で使用します)
            が現在の作業ディレクトリに存在しており、かつ <literal>--configuration</literal>
            が使われて<emphasis>いない</emphasis>場合、設定が自動的にそのファイルから読み込まれます。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary>Configuration</primary></indexterm>
        <term><literal>--no-configuration</literal></term>
        <listitem>
          <para>
            現在の作業ディレクトリにある <filename>phpunit.xml</filename> および
            <filename>phpunit.xml.dist</filename> を無視します。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <indexterm><primary><literal>include_path</literal></primary></indexterm>
        <term><literal>--include-path</literal></term>
        <listitem>
          <para>
            PHP の <literal>include_path</literal> の先頭に、指定したパスを追加します。
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><literal>-d</literal></term>
        <listitem>
          <para>
            指定した PHP 設定オプションの値を設定します。
          </para>
        </listitem>
      </varlistentry>
    </variablelist>

    <note>
      <para>
        PHPUnit 4.8 以降では、これらのオプションを引数の後にも指定できるようになりました。
      </para>
    </note>
  </section>
</chapter>
